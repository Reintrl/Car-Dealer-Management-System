# План тестирования
---

**Дата:** 25.10.2025  

# Содержание
1 [Введение](#introduction)  
2 [Объект тестирования](#items)  
3 [Атрибуты качества](#quality)  
4 [Риски](#risk)  
5 [Аспекты тестирования](#features)  
6 [Нефункциональные требования](#nonfunctional)  
7 [Подходы к тестированию](#approach)  
8 [Окружение и данные](#env)  
9 [Критерии приёмки](#acceptance)  
10 [Представление результатов](#pass)  
11 [Выводы](#conclusion)

<a name="introduction"/>

## Введение

Документ описывает план тестирования веб‑приложения **CarDealer**. Цель тестирования – проверить соответствие фактического поведения реализованных функций требованиям и ожиданиям, выявить дефекты до развёртывания.

Основание: анализ исходного кода фронтенда (React: `src/App.js`, компоненты `CarForm.jsx`, `CarList.jsx`) и бэкенда (Spring Boot: контроллеры `CarController`, `DealerController`, `OrderController`, `UserController`, `CounterController`, `LogController`; конфигурация `application.properties`).

Ключевой функционал в зоне тестирования: управление автомобилями, дилерами, пользователями и заказами; фильтрация и пакетное создание; счётчики и асинхронная генерация логов.

<a name="items"/>

## Объект тестирования

**Фронтенд:** SPA на React (компоненты для списка/формы автомобилей).  
**Бэкенд:** Spring Boot REST API.

Основные REST‑эндпоинты (сводно; подробности в приложении `backend_endpoints.csv`):

- `/api/cars` — CRUD, фильтрация `/filter`, создание пакетом `/bulk`.
- `/api/dealers` — CRUD.
- `/api/orders` — CRUD.
- `/api/users` — CRUD.
- `/api/counter` — чтение/инкремент счётчиков.
- `/api/logs` — асинхронная генерация логов: `POST /generate`, `GET /status/{taskId}`, `GET /download/{taskId}`.

<a name="quality"/>

## Атрибуты качества

1. **Функциональность**
   - Полнота: реализованы и доступны заявленные CRUD‑операции и вспомогательные функции (фильтр, пакетные операции, асинхронные задачи).
   - Корректность: API возвращает ожидаемые коды и тела ответов; фронтенд корректно отображает состояние и ошибки.
2. **Удобство использования**
   - Интерфейс интуитивен: формы валидации полей, понятные сообщения об ошибках.
   - Базовые операции (создать/отредактировать/удалить автомобиль) выполняются за ≤ 3 шага.
3. **Надёжность**
   - Целостность данных при валидных и невалидных входных данных; отсутствие «висячих» задач.
   - Идемпотентность `PUT` и корректная семантика `POST/DELETE`.
4. **Производительность**
   - Время ответа на операции списка/фильтра — ≤ 2 сек при 1000 записях (локально).
   - Асинхронная генерация логов не блокирует основной поток запросов.
5. **Доступность**
   - API отвечает стабильно при непрерывной работе 24/7 в тестовом окружении.

<a name="risk"/>

## Риски

- Возможные гонки при параллельных обновлениях (например, массовое создание + фильтрация).
- Длительные асинхронные задачи логов приводят к истечению таймаутов клиента.
- Потенциальная несогласованность схемы БД и DTO (валидация/ограничения).
- Отсутствие аутентификации → риск несанкционированных операций в реальной среде (в тестах имитируется доверенная среда).

<a name="features"/>

## Аспекты тестирования

### 1. Автомобили (`/api/cars`)
Проверить:
- Создание одного авто (`POST /api/cars`) с валидными данными.
- Валидация: пустые/неверные поля (цена < 0, некорректный `dealerId` и т. п.).
- Чтение списка (`GET /api/cars`) и конкретной записи (`GET /api/cars/{id}`).  
- Обновление (`PUT /api/cars/{id}`) и удаление (`DELETE /api/cars/{id}`).
- Фильтрация (`GET /api/cars/filter`): по бренду/модели/цене/году (набор параметров из DTO фильтра).  
- Пакетное создание (`POST /api/cars/bulk`) — частичный успех, обработка дубликатов.
- Конкурентные операции: одновременное удаление и обновление одной записи (ожидаемые коды 404/409/200).

### 2. Дилеры (`/api/dealers`)
- Полный CRUD; валидация обязательных полей (название, адрес).
- Связность: удаление дилера, к которому привязаны автомобили (ожидаемая политика — запрет/каскад; проверить фактическое поведение).

### 3. Пользователи (`/api/users`)
- CRUD; валидация (минимальная длина имени, корректность email, уникальность).  
- Ошибки 400/404/409 — формат и содержание `ErrorResponse`.

### 4. Заказы (`/api/orders`)
- Создание заказа на автомобиль: корректная привязка к `userId` и `carId`.  
- Сценарии: заказ для несуществующих `userId/carId` → 400/404.  
- Изменение статуса заказа; запрет нелегальных переходов (если ограничено).

### 5. Счётчик (`/api/counter`)
- Чтение текущего значения; инкремент; идемпотентность при повторе запроса.  
- Нагрузочные вызовы (100 параллельных инкрементов) → отсутствие потери инкрементов.

### 6. Логи (`/api/logs`)
- `POST /generate` возвращает `taskId`.  
- `GET /status/{taskId}` — статусы: QUEUED, IN_PROGRESS, DONE, ERROR.  
- `GET /download/{taskId}` — доступность только при DONE; корректный content-type, размер файла.  
- Неверный `taskId` → 404.

### 7. Фронтенд (React)
- Рендер списка автомобилей (`CarList`), пагинация/поиск (если реализованы).
- Форма создания/редактирования (`CarForm`): подсветка ошибок, маски и типы инпутов, блокировка кнопок при сабмите.
- Удаление автомобиля с подтверждением; обновление списка без перезагрузки страницы.
- Сетевые ошибки отображаются как уведомления/алерты.

<a name="nonfunctional"/>

## Нефункциональные требования

- Адаптивная верстка основных экранов (десктоп ≥1280px, мобильный iPhone 14 Pro Max).  
- Локализация сообщений (если предусмотрена) — отсутствие «сырого» текста ошибок от сервера.  
- Время отклика списков ≤ 2 сек, карточных операций ≤ 1 сек (локально).  
- Уровень доступности API в тестовом прогоне ≥ 99%.

<a name="approach"/>

## Подходы к тестированию

- **Ручное функциональное тестирование** фронта через браузер и **инструментальное тестирование API** (Postman/HTTPie/cURL).  
- Для каждого сценария фиксируются: входные данные, шаги, ожидаемый результат, фактический результат, статус (Pass/Fail), артефакты (скриншоты/трассы).  
- Для негативных тестов — отдельные кейсы на валидацию и коды ошибок.

<a name="env"/>

## Окружение и данные

- Бэкенд: Java 17, Spring Boot; профиль по умолчанию (настройки из `application.properties`).  
- БД: та, что настроена в `application.properties` (при отсутствии — H2/in‑memory на dev‑профиле).  
- Фронтенд: Node.js LTS, сборка dev (`npm start`) или prod (`npm build`).  
- Набор тестовых данных:
  - 10 дилеров, 100–500 автомобилей (разные бренды/годы/цены).
  - 20 пользователей.
  - 30 заказов в разных состояниях.

<a name="acceptance"/>

## Критерии приёмки

- Все обязательные CRUD‑сценарии по сущностям Cars/Dealers/Users/Orders проходят успешно.  
- Фильтрация и пакетное создание отрабатывают без фатальных ошибок.  
- Асинхронные логи корректно генерируются и скачиваются; некорректные `taskId` обрабатываются.  
- UI корректно отображает данные, ошибки и обновляет состояние без перезагрузки страницы.  
- Нет «критических» и «блокирующих» дефектов.

<a name="pass"/>

## Представление результатов

Результаты оформляются в документе **“Результаты тестирования”** (`Test_results.md`) с перечнем сценариев, шагов, ожидаемых/фактических результатов, логов и статусом.

Приложения:
- `backend_endpoints.csv` — выгрузка эндпоинтов, полученных из исходников.
- `backend_endpoints_preview.md` — выдержки из контроллеров.

<a name="conclusion"/>

## Выводы

План покрывает ключевые функции **CarDealer** и критические нефункциональные аспекты.  
Прохождение тестов подтверждает корректность работы в рамках заявленных требований; обнаруженные дефекты фиксируются и после исправлений повторно проверяются.
